contract commands

 show system internal policy-mgr stats
 
 
 Memory
 
 The "vsh -c show system internal epm mem-stats detail" command shows a continuous increase of memory usage for EPM_MEM_epm_dbg_rec_idx_t. This is a necessary condition, but is not 

moquery -c ipv4Addr -f ‘ipv4.Addr.addr==“”’
moquery -c tunnelIf -f 'tunnel.If.vrfName=="overlay-1"' | egrep --color "id|dest|dn|src"

Find dteps:
moquery -c ipv4Addr -f 'ipv4.Addr.dn*"lo0"' | egrep "addr|dn" | sed '/^rn/{G;}'  

show isis dteps vrf overlay-1 


module-1# show system intern epmc endpoint mac a217.0000.003a   >>> get the BD VLAN ID.
show system internal eltmc info vlan xxx  >>> get the PCTAG


Multicast

find BD MCAST

moquery -c  fvBD | egrep "#|dn|bcastP“


FTAG topo table

pod2-spine1# show isis internal mcast  route ftag



Contracts

leaf101# show log ip access-list internal packet-log deny | more

EPMC

Decode
nxos_binlog_decodebinlog_uuid_472_epmc_vdc_1_sub_1_level_3 > /data/techsupport/rgatti-epmclog-mar23.txt

COOP

Missing how to get key?

show coop internal info repo ep key 16646016 00:50:56:B2:44:34 


COOP logs

leaf103# cd /var/sysmgr/tmp_logs/leaf103# ls -la  | grep .bl

leaf103# log_trace_bl_print_tool coop_trace.bl > /data/techsupport/cooptrace_mar24.txt


L3
vsh_lc
show plat int hal l3 routes 


VLANS
 vsh_lc -c "show system internal eltmc info vlan brief" 
 
==========
EPM decode
==========
==================
Find decode script
==================
+ AS root

find ./ -name *decode*

snip...

./mnt/ifc/cfg/isan/plugin/0/lc/isan/bin/l2mcast_tor_sdk_binlog_decode
./mnt/ifc/cfg/isan/plugin/1/isan/bin/epm_trace_decode
./mnt/ifc/cfg/isan/plugin/1/isan/bin/epm_binlog_decode
./mnt/ifc/cfg/isan/plugin/1/isan/bin/mfdm_binlog_decode
./mnt/ifc/cfg/isan/bin/epm_trace_decode
./mnt/ifc/cfg/isan/bin/epm_binlog_decode
./mnt/ifc/cfg/isan/bin/log_trace_decode

snip...

+ So the scripts are in /isan/bin/

========
EPM logs
========

binlog_uuid_410_vdc_1_sub_1_level_3


=============
Final Command
=============
/isan/bin/epm_binlog_decode -log-file binlog_uuid_410_vdc_1_sub_1_level_3 > {output file}


